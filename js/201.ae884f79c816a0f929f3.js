(self.webpackChunkaccessRequests=self.webpackChunkaccessRequests||[]).push([[201],{36318:(e,t,a)=>{"use strict";a.d(t,{A:()=>E});var n=a(93345),l=a.n(n),r=a(58352),s=a(72583),c=a(71601),o=a(1448),i=a(11830),m=a(5556),d=a.n(m),u=a(20886);const p=({requestId:e,onClose:t})=>{const[a,n]=l().useState(!1),m=(0,o.wA)();return l().createElement(r.a,{title:"Cancel request?",isOpen:!0,variant:"small",onClose:()=>t(!1),actions:[l().createElement(s.$n,{key:"confirm",variant:"danger",onClick:()=>{n(!0),u.A.patch(`/api/rbac/v1/cross-account-requests/${e}/`,{status:"cancelled"},{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((e=>{if(e.errors&&e.errors.length>0)throw Error(e.errors.map((e=>e.detail)).join("\n"));m((0,i.z8)({variant:"success",title:"Request cancelled successfully"})),n(!1),t(!0)})).catch((e=>{m((0,i.z8)({variant:"danger",title:"There was an error cancelling your request",description:e.message})),n(!1),t(!0)}))}},"Yes, cancel"),l().createElement(s.$n,{key:"cancel",variant:"link",onClick:()=>t(!1)},"No, keep")]},"Request ",l().createElement("b",null,e)," will be withdrawn.",a&&l().createElement(c.y,{size:"lg"}))};p.propTypes={requestId:d().string,onClose:d().func};const E=p},33783:(e,t,a)=>{"use strict";a.d(t,{A:()=>se});var n=a(93345),l=a.n(n),r=a(5556),s=a.n(r),c=a(1448),o=a(11830),i=a(55318),m=a(72583),d=a(47931),u=a(33675),p=a(43030),E=a(75279),y=a(58352),g=a(71601),h=a(60316),v=a(99499),f=a(87945),b=a(79371),S=a(63537),C=a(2837),k=a(11522),w=a(81558),A=a(56780),T=a(92391),q=a(95658),R=a(57502),x=a(31358),F=a(44461);const _=({headerContent:e=null,bodyContent:t=null,field:a="input"})=>l().createElement(F.A,{headerContent:e,bodyContent:t},l().createElement("button",{type:"button","aria-label":`More info for ${a}`,onClick:e=>e.preventDefault(),"aria-describedby":"form-name",className:"pf-v5-c-form__group-label-help"},l().createElement(x.Ay,{noVerticalAlign:!0})));_.propTypes={headerContent:s().element,bodyContent:s().element,field:s().string};const D=_,N="account-number",I="org-id",$="start",P="end",B="selected-roles",O=e=>{const{input:t}=(0,k.A)(e),a=(0,w.default)().getState().values,[r,s]=(0,n.useState)(a[B]||[]);return(0,n.useEffect)((()=>{t.onChange(r)}),[r]),l().createElement(A.g,{fieldId:"select-role"},l().createElement(T.A,{roles:r,setRoles:s}))};O.propTypes={selectedRoles:s().array,setSelectedRoles:s().func,title:s().string,description:s().string};const L=O;var z=a(30620),j=a(23215),Y=a(90678),M=a(73113),X=a(22069);const H=()=>{const e=(0,w.default)().getState().values;return l().createElement(l().Fragment,null,l().createElement(Y.B,{className:"accessRequests"},l().createElement(M.a,{className:"pf-v5-u-mb-md"},l().createElement(z.x,null,l().createElement(j.E,{sm:12,md:2},l().createElement(X.E,{component:X.Y.h4,className:"access-requests-bold-text"},"Account name")),l().createElement(j.E,{sm:12,md:10},l().createElement(X.E,{component:X.Y.p},e["first-name"]+" "+e["last-name"])))),l().createElement(M.a,{className:"pf-v5-u-mb-md"},l().createElement(z.x,null,l().createElement(j.E,{sm:12,md:2},l().createElement(X.E,{component:X.Y.h4,className:"access-requests-bold-text"},"Account number")),l().createElement(j.E,{sm:12,md:10},l().createElement(X.E,{component:X.Y.p},e[N])))),l().createElement(M.a,null,l().createElement(z.x,null,l().createElement(j.E,{sm:12,md:2},l().createElement(X.E,{component:X.Y.h4,className:"access-requests-bold-text"},"Access duration")))),l().createElement(M.a,null,l().createElement(z.x,null,l().createElement(j.E,{sm:12,md:2},l().createElement(X.E,{component:X.Y.h4},"From")),l().createElement(j.E,{sm:12,md:10},l().createElement(X.E,{component:X.Y.p},e[$])))),l().createElement(M.a,{className:"pf-v5-u-mb-md"},l().createElement(z.x,null,l().createElement(j.E,{sm:12,md:2},l().createElement(X.E,{component:X.Y.h4},"To")),l().createElement(j.E,{sm:12,md:10},l().createElement(X.E,{component:X.Y.p},e[P])))),l().createElement(M.a,null,l().createElement(z.x,null,l().createElement(j.E,{sm:12,md:2},l().createElement(X.E,{component:X.Y.h4,className:"access-requests-bold-text"},"Roles")),l().createElement(j.E,{sm:12,md:10},l().createElement(X.E,{component:X.Y.p},e[B]?.[0])))),e[B]?.slice(1).map((e=>l().createElement(M.a,{key:e},l().createElement(z.x,null,l().createElement(j.E,{sm:12,md:2},l().createElement(X.E,{component:X.Y.h4})),l().createElement(j.E,{sm:12,md:10},l().createElement(X.E,{component:X.Y.p},e))))))))};H.propTypes={targetAccount:s().any,start:s().any,end:s().any,roles:s().any,isLoading:s().any,error:s().any,onClose:s().any};const Z=H;var G=a(76367),U=a(59257),V=a(9937),J=a(91753),W=a(30666),K=a(93973),Q=a(52860);var ee=a(23285);var te=a(20886);const ae="Invalid Account number",ne=e=>l().createElement(S.Ay,{...e,showFormControls:!1}),le={"set-name":()=>{const{getState:e}=(0,w.default)(),t=l().createElement("p",null,"Customers will be able to see this information as part of your request");return l().createElement(W.B,{hasGutter:!0},l().createElement(K.o,{isFilled:!0},l().createElement(A.g,{label:"First name",name:"first-name",labelIcon:l().createElement(D,{bodyContent:t,field:"first name"})},l().createElement(ee.ks,{id:"first-name",value:e().values["first-name"],isDisabled:!0}))),l().createElement(K.o,{isFilled:!0},l().createElement(A.g,{label:"Last name",name:"last-name",labelIcon:l().createElement(D,{bodyContent:t,field:"last name"})},l().createElement(ee.ks,{id:"last-name",value:e().values["last-name"],isDisabled:!0}))))},"access-duration":()=>{const e=(0,w.default)(),t=e.getState().values,[a,n]=l().useState(),[r,s]=l().useState(),[c,o]=l().useState(),i=new Date;i.setDate(i.getDate()-1);const m=new Date;m.setDate(m.getDate()+60);const d=e=>e.toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}),u=e=>/^([0]?[1-9]|[1][0-2])\/([0]?[1-9]|[1|2][0-9]|[3][0|1])\/([0-9]{4})$/.test(e),p=e=>{const t=e.split("/");if(!u(e))return;const a=t[0].padStart(2,"0"),n=t[1].padStart(2,"0"),l=t[2].padStart(4,"0");return new Date(`${l}-${a}-${n}T00:00:00`)},E=e=>{if((0,J.v)(e)){if(e<i){const e="Start date must be today or later";return o(e),e}if(e>m){const e="Start date must be within 60 days of today";return o(e),e}}return o(),""},y=e=>{if(s(),(0,J.v)(a)){if(a>e){const e="End date must be after start date";return s(e),e}const t=new Date(a);t.setFullYear(t.getFullYear()+1);const n="Access duration may not be longer than one year";return e>t&&s(n),e>t?n:""}return s(),""},g=(t,a,l)=>{n(l?new Date(l):void 0),e.change($,u(a)?a:""),(0,J.v)(l)&&!E(l)&&(l.setDate(l.getDate()+7),e.change(P,d(l)),s())},h=(t,n,l)=>{y(l)||!u(n)?e.change(P,""):(e.change(P,n),E(a)&&e.change($,"")&&o())};return l().createElement(A.g,{label:"Access duration",isRequired:!0,labelIcon:l().createElement(D,{bodyContent:l().createElement("div",null,"This is the time frame you would like to be granted read access to accounts."),field:"access duration"})},l().createElement(W.B,{hasGutter:!0},l().createElement(K.o,null,l().createElement(G.l,{"aria-label":"Start date",placeholder:"mm/dd/yyyy",value:t[$],dateFormat:d,dateParse:p,onChange:g,validators:[E],inputProps:{onBlur:({target:{value:e}})=>g(),validated:""===t[$]||t[$]&&!u(t[$])?Q.nh.error:Q.nh.default}}),c||""===t[$]?l().createElement(U.E,null,l().createElement(V.j,{variant:"error"},""===t[$]?"Enter a valid date ":c)):null),l().createElement(K.o,{className:"pf-v5-u-mt-sm"},"to"),l().createElement(K.o,null,l().createElement(G.l,{"aria-label":"End date",placeholder:"mm/dd/yyyy",value:t[P],dateFormat:d,dateParse:p,onChange:h,validators:[y],inputProps:{onBlur:({target:{value:e}})=>h(),validated:""===t[P]||t[P]&&!u(t[P])?Q.nh.error:Q.nh.default}}),r||""===t[P]?l().createElement(U.E,null,l().createElement(V.j,{variant:"error"},""===t[$]?"Enter a valid date ":r)):null)))},"select-roles":L,"review-details":Z},re=({requestId:e,variant:t,onClose:a})=>{const r=(0,c.wA)(),s="edit"===t,S=(0,n.useRef)(((e,t)=>({fields:[{component:"wizard",name:"wizard",isDynamic:!0,inModal:!0,showTitles:!0,className:"accessRequests",title:`${(0,d.ZH)(t)} request`,fields:[{name:"details",nextStep:"select-roles",title:"Request details",fields:[{component:"set-name",name:"name",validate:[{type:q.A.REQUIRED}]},{component:R.A.TEXT_FIELD,isRequired:!0,label:"Account number",isDisabled:e,placeholder:"Example, 8675309",FormGroupProps:{labelIcon:l().createElement(D,{bodyContent:l().createElement("p",null,"This is the account number that you would like to receive read access to"),field:"account number"})},helperText:"Enter the account number you would like access to",name:N,validate:[{type:"validate-account"}]},{component:R.A.TEXT_FIELD,isRequired:!0,label:"Organization ID",placeholder:"Example, 1234567",isDisabled:e,FormGroupProps:{labelIcon:l().createElement(D,{bodyContent:l().createElement("p",null,"This is the org ID of the account that you would like to receive read access to"),field:"organization ID"})},helperText:"Enter the organization ID you would like access to",name:I,validate:[{type:"validate-org-id"}]},{name:"access-duration",component:"access-duration",label:"Access duration",isRequired:!0},{name:$,component:R.A.TEXT_FIELD,hideField:!0,isRequired:!0,validate:[e=>e?.length>0?void 0:"Invalid start date"]},{name:P,component:R.A.TEXT_FIELD,hideField:!0,isRequired:!0,validate:[e=>e?.length>0?void 0:"Invalid end date"]}]},{name:"select-roles",nextStep:"review-details",title:"Select roles",StepTemplate:e=>e.formFields,fields:[{component:"select-roles",name:B,validate:[e=>e?.length>0?void 0:"No roles selected"]}]},{name:"review-details",title:"Review details",fields:[{component:"review-details",name:"review-details"}]}]}]}))(s,t)),[k,w]=(0,n.useState)(!1),[A,T]=l().useState(),[x,F]=l().useState(),[_,O]=l().useState(!1),[L,z]=l().useState(!1),[j,Y]=l().useState();l().useEffect((()=>{O(!0);const t=insights.chrome.auth.getUser(),a=s?te.A.get(`/api/rbac/v1/cross-account-requests/${e}/?query_by=user_id`,{headers:{Accept:"application/json"}}):new Promise((e=>e(!0)));Promise.all([t,a]).then((([t,a])=>{if(!(t&&t.identity&&t.identity.user))throw Error("Couldn't get current user. Make sure you're logged in");if(Y(t.identity.user),s){if(a.errors)throw Error(a.errors.map((e=>e.detail)).join("\n"));if(!a||!a.target_account)throw Error(`Could not fetch details for request ${e}`);F({[N]:a.target_account,[I]:a.target_org,[$]:a.start_date,[P]:a.end_date,[B]:a.roles.map((e=>e.display_name))})}O(!1)})).catch((e=>{r((0,o.z8)({variant:"danger",title:"Could not load access request",description:e.message}))}))}),[]);const M={"validate-account":()=>e=>e&&!A?void 0:"Please enter a valid account number","validate-org-id":()=>e=>e&&!A?void 0:"Please enter a valid organization ID","validate-duration":()=>e=>e?.length>0};return k?l().createElement(y.a,{title:"Exit request creation?",variant:"small",titleIconVariant:"warning",isOpen:!0,onClose:()=>{w(!1),a(!1)},actions:[l().createElement(m.$n,{key:"confirm",variant:"primary",onClick:()=>a(!1)},"Exit"),l().createElement(m.$n,{key:"cancel",variant:"link",onClick:()=>w(!1)},"Stay")]},"All inputs will be discarded."):A||_||L?l().createElement(y.a,{isOpen:!0,variant:y.d.large,showClose:!1,className:"accessRequests",hasNoBodyWrapper:!0,"aria-describedby":"wiz-modal-description","aria-labelledby":"wiz-modal-title"},l().createElement(v.s,{className:"accessRequests",title:`${(0,d.ZH)(t)} request`,steps:[{name:"status",component:_?l().createElement(i.a,null,l().createElement(g.y,null)):l().createElement(u.p,null,L?l().createElement(l().Fragment,null,l().createElement(p.q,{icon:()=>l().createElement(g.y,{size:"lg"})}),l().createElement(h.h,{headingLevel:"h2",size:"lg"},"Submitting access request"),l().createElement(m.$n,{variant:"link",onClick:()=>a(!0)},"Close")):l().createElement(l().Fragment,null,l().createElement(p.q,{icon:f.Ay,color:"#C9190B"}),l().createElement(h.h,{headingLevel:"h2",size:"lg"},A.title||"An error occured"),l().createElement(E.h,null,A.description),A.title!==ae&&l().createElement(m.$n,{variant:"primary",onClick:()=>T()},"Return to Step 1"))),isFinishedStep:!0}],onClose:()=>a(!0)})):l().createElement(b.A,{schema:S.current,subscription:{values:!0},FormTemplate:ne,componentMapper:{...C.Ay,...le},validatorMapper:M,onSubmit:n=>{z(!0);const l={target_account:n[N],start_date:n[$],end_date:n[P],target_org:n[I],roles:n[B]};F(n),te.A[s?"put":"post"]("/api/rbac/v1/cross-account-requests/"+(s?`/${e}/`:""),l,{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((e=>{if(e.errors&&e.errors.length>0)throw Error(e.errors[0].detail);r((0,o.z8)({variant:"success",title:(s?"Edited":"Created")+" access request",description:e.request_id})),a(!0)})).catch((({errors:e=[]})=>{const a=/Account .* does not exist/.test(e[0]?.message||e[0]?.detail);T({title:a?ae:`Could not ${t} access request`,description:a?"Please return to Step 1: Request details and input a new account number for your request.":e[0]?.message||e[0]?.detail}),z(!1)}))},initialValues:{...x,"first-name":j?.first_name,"last-name":j?.last_name},onCancel:()=>w(!0)})};re.propTypes={requestId:s().string,variant:s().any,onClose:s().func};const se=re},92391:(e,t,a)=>{"use strict";a.d(t,{A:()=>Q});var n=a(93345),l=a.n(n),r=a(60316),s=a(72583),c=a(28296),o=a(45523),i=a(73683),m=a(15402),d=a(76792),u=a(63148),p=a(97192),E=a(39711),y=a(94230),g=a(33774),h=a(1448),v=a(11830),f=a(5556),b=a.n(f),S=a(20886),C=a(47931),k=a(68382),w=a(5924),A=a(45894),T=a(87904),q=a(53642),R=a(23285),x=a(14914),F=a(5833),_=a(81855),D=a(5715),N=a(93070),I=a(99780),$=a(5029),P=a(18960),B=a(62913);const O="filter-application",L="Filter by application",z=({selectedRoles:e,setSelectedRoles:t,isChecked:a,appSelections:r,setAppSelections:s,columns:c,rows:o,filteredRows:i,pagedRows:m,anySelected:d,clearFiltersButton:u,perPage:p,nameFilter:E,setNameFilter:y,AccessRequestsPagination:g,applications:h})=>{const v={isDropdownOpen:!1,isSelectOpen:!1,isBulkSelectOpen:!1,filterColumn:c[0]},[f,b]=(0,n.useReducer)(((e,t)=>{switch(t.type){case"set":return{...e,[t.payload.key]:t.payload.value};case"reset":return v;default:throw new Error("Unknown action type: ${action.type}")}}),v),S=(e,t)=>{b({type:"set",payload:{key:e,value:t}})},z=r.length>0||E,j=(e,a)=>{t(a?i.map((e=>e.display_name)):[])};return l().createElement(l().Fragment,null,l().createElement(k.M,{id:"access-requests-roles-table-toolbar"},l().createElement(w.P,null,l().createElement(A.T,null,l().createElement(_.m,{onSelect:()=>S("isBulkSelectOpen",!f.isBulkSelectOpen),position:"left",toggle:l().createElement(D.C,{splitButtonItems:[l().createElement(N.J,{key:"a",id:"example-checkbox-2","aria-label":d?"Deselect all":"Select all",isChecked:a,onClick:()=>j(0,!d)})],onToggle:(e,t)=>S("isBulkSelectOpen",t),isDisabled:0===o.length},0!==e.length&&l().createElement(l().Fragment,null,e.length," selected")),isOpen:f.isBulkSelectOpen,dropdownItems:[l().createElement(I.t,{key:"0",onClick:()=>j(0,!1)},"Select none (0 items)"),l().createElement(I.t,{key:"1",onClick:()=>t(e.concat(m.map((e=>e.display_name))))},"Select page (",Math.min(m.length,p)," items)"),l().createElement(I.t,{key:"2",onClick:()=>j(0,!0)},"Select all (",i.length," items)")]})),l().createElement(A.T,null,l().createElement(T.M,null,l().createElement(q.b,null,l().createElement(_.m,{isOpen:f.isDropdownOpen,onSelect:e=>{S("isDropdownOpen",!1),S("isSelectOpen",!1),S("filterColumn",e.target.value)},toggle:l().createElement(D.C,{onToggle:(e,t)=>S("isDropdownOpen",t)},l().createElement(B.Ay,null)," ",f.filterColumn),dropdownItems:["Role name","Application"].map((e=>l().createElement(I.t,{key:e,value:e,component:"button"},(0,C.ZH)(e))))})),"Application"===f.filterColumn?l().createElement(l().Fragment,null,l().createElement("span",{id:O,hidden:!0},L),l().createElement($.l,{"aria-labelledby":O,variant:"checkbox","aria-label":"Select applications",onToggle:(e,t)=>S("isSelectOpen",t),onSelect:(e,t)=>{r.includes(t)?s((e=>e.filter((e=>e!==t)))):s([...r,t])},isOpen:f.isSelectOpen,selections:r,isCheckboxSelectionBadgeHidden:!0,placeholderText:L,className:"select-toolbar"},h.map((e=>l().createElement(P.O,{key:e,value:e},(0,C.ZH)(e.replace(/-/g," "))))))):l().createElement(R.ks,{name:"rolesSearch",id:"rolesSearch",type:"search","aria-label":"Search input",placeholder:"Filter by role name",value:E,onChange:(e,t)=>y(t)}))),l().createElement(A.T,{variant:"pagination",align:{default:"alignRight"}},l().createElement(g,{id:"top"}))),z&&l().createElement(w.P,null,E&&l().createElement(x.I,{categoryName:"Role name"},l().createElement(F.v,{onClick:()=>y("")},E)),r.length>0&&l().createElement(x.I,{categoryName:"Status"},r.map((e=>l().createElement(F.v,{key:e,onClick:()=>s((t=>t.filter((t=>t!==e))))},e)))),u)))};z.propTypes={selectedRoles:b().array,setSelectedRoles:b().func,isChecked:b().bool,appSelections:b().any,setAppSelections:b().func,columns:b().array,rows:b().array,filteredRows:b().array,pagedRows:b().array,anySelected:b().bool,clearFiltersButton:b().object,perPage:b().number,nameFilter:b().string,setNameFilter:b().func,AccessRequestsPagination:b().func,applications:b().array};const j=z;var Y=a(33675),M=a(86130),X=a(43030),H=a(75279),Z=a(97796),G=a(41829);const U=({columns:e,clearFiltersButton:t})=>l().createElement(p.N,null,l().createElement(d.Tr,null,l().createElement(E.Td,{colSpan:e.length},l().createElement(Y.p,{variant:"sm"},l().createElement(M.o,{titleText:"No matching requests found",icon:l().createElement(X.q,{icon:G.Ay}),headingLevel:"h2"}),l().createElement(H.h,null,"No results match the filter criteria. Remove all filters or clear all filters to show results."),l().createElement(Z.s,null,t)))));U.propTypes={columns:b().array,clearFiltersButton:b().object};const V=U;let J=[],W=[];const K=({roles:e,setRoles:t})=>{const a=void 0===t,n=["Role name","Role description","Permissions"],[f,C]=l().useState(Array.from(J)),[k,w]=l().useState(W),[A,T]=l().useState([]);l().useEffect((()=>{0!==J.length&&0!==W.length||S.A.get("/api/rbac/v1/roles/?system=true&limit=9999&order_by=display_name&add_fields=groups_in_count",{headers:{Accept:"application/json"}}).then((({data:e})=>{e.forEach((e=>{e.isExpanded=!1,e.permissions=e.accessCount})),J=e.map((e=>Object.assign({},e))),C(e);const t=Array.from(e.map((e=>e.applications)).flat().reduce(((e,t)=>(e.add(t),e)),new Set)).sort();W=t,w(t)})).catch((e=>Q((0,v.z8)({variant:"danger",title:"Could not fetch roles list",description:e.message}))))}),[]);const[q,R]=l().useState("name"),[x,F]=l().useState("asc"),_=(e,t,a)=>{R(t),F(a)},[D,N]=l().useState(""),I=A.length>0||D,$=e.map((e=>e.display_name)),P=f.filter((e=>!(A.length>0)||e.applications.find((e=>A.includes(e))))).filter((e=>e.display_name.toLowerCase().includes(D.toLowerCase()))).filter((e=>!a||$.includes(e.display_name))),[B,O]=l().useState(1),[L,z]=l().useState(10),Y=({id:e})=>l().createElement(c.d,{itemCount:P.length,perPage:L,page:B,onSetPage:(e,t)=>O(t),id:`access-requests-roles-table-pagination-${e}`,variant:e,onPerPageSelect:(e,t)=>{O(1),z(t)},isCompact:"top"===e});Y.propTypes={id:b().string};const M=P.sort(((e,t)=>"number"==typeof e[q]?"asc"===x?e[q]-t[q]:t[q]-e[q]:"asc"===x?(e[q]+"").localeCompare(t[q]):(t[q]+"").localeCompare(e[q]))).slice((B-1)*L,B*L),X=!!(e.length>0)&&null,H=e.length===P.length&&e.length>0||X,Z=(a,n,l)=>{const r=M[l].display_name;t(n?e.concat(r):e.filter((e=>e!==r)))},G=l().createElement(s.$n,{variant:"link",onClick:()=>{T([]),N("")}},"Clear filters"),U=a?null:l().createElement(j,{selectedRoles:e,setSelectedRoles:t,isChecked:H,appSelections:A,setAppSelections:T,columns:n,rows:f,filteredRows:P,pagedRows:M,clearFiltersButton:G,perPage:L,nameFilter:D,setNameFilter:N,AccessRequestsPagination:Y,applications:k}),K=["Application","Resource type","Operation"],Q=(0,h.wA)(),ee=l().createElement(y.X,{"aria-label":"My user access roles",variant:i.a.compact},l().createElement(m.d,null,l().createElement(d.Tr,null,!a&&l().createElement(u.Th,null),l().createElement(u.Th,{width:30,sort:{sortBy:{index:q,direction:x},onSort:_,columnIndex:"name"}},n[0]),l().createElement(u.Th,{width:50,sort:{sortBy:{index:q,direction:x},onSort:_,columnIndex:"description"}},n[1]),l().createElement(u.Th,{width:10,sort:{sortBy:{index:q,direction:x},onSort:_,columnIndex:"permissions"},modifier:"nowrap"},n[2]))),0===f.length&&[...Array(L).keys()].map((e=>l().createElement(p.N,{key:e},l().createElement(d.Tr,null,!a&&l().createElement(E.Td,null),n.map(((e,t)=>l().createElement(E.Td,{dataLabel:e,key:t},l().createElement("div",{style:{height:"22px"},className:"ins-c-skeleton ins-c-skeleton__md"}," ")))))))),M.map(((t,r)=>l().createElement(p.N,{key:r},l().createElement(d.Tr,null,!a&&l().createElement(E.Td,{select:{rowIndex:r,onSelect:Z,isSelected:e.find((e=>e===t.display_name))}}),l().createElement(E.Td,{dataLabel:n[0]},t.display_name),l().createElement(E.Td,{dataLabel:n[1],className:"pf-v5-m-truncate"},l().createElement(o.m,{entryDelay:1e3,content:t.description},l().createElement("span",{className:"pf-v5-m-truncate pf-v5-c-table__text"},t.description))),l().createElement(E.Td,{dataLabel:n[2],className:(0,g.A)("pf-c-table__compound-expansion-toggle",t.isExpanded&&"pf-v5-m-expanded")},l().createElement("button",{type:"button",className:"pf-v5-c-table__button",onClick:()=>(e=>{e.isExpanded=!e.isExpanded,C([...f]),e.access||S.A.get(`/api/rbac/v1/roles/${e.uuid}/`,{headers:{Accept:"application/json"}}).then((t=>{e.access=t.access.map((e=>e.permission.split(":"))),C([...f])})).catch((t=>Q((0,v.z8)({variant:"danger",title:`Could not fetch permission list for ${e.name}.`,description:t.message}))))})(t)},t.permissions))),l().createElement(d.Tr,{isExpanded:t.isExpanded},!a&&l().createElement(E.Td,null),l().createElement(E.Td,{className:"pf-v5-u-p-0",colSpan:3},l().createElement(y.X,{className:"pf-v5-m-no-border-rows"},l().createElement(m.d,null,l().createElement(d.Tr,null,K.map((e=>l().createElement(u.Th,{key:e},e))))),l().createElement(p.N,null,Array.isArray(t.access)?t.access.map((e=>l().createElement(d.Tr,{key:e.join(":")},l().createElement(E.Td,{dataLabel:K[0]},e[0]),l().createElement(E.Td,{dataLabel:K[1]},e[1]),l().createElement(E.Td,{dataLabel:K[2]},e[2])))):[...Array(t.permissions).keys()].map((e=>l().createElement(d.Tr,{key:e},K.map((e=>l().createElement(E.Td,{key:e,dataLabel:e},l().createElement("div",{style:{height:"22px"},className:"ins-c-skeleton ins-c-skeleton__sm"}," ")))))))))))))),0===M.length&&I?l().createElement(V,{columns:n,clearFiltersButton:G}):null);return l().createElement(l().Fragment,null,!a&&l().createElement(l().Fragment,null,l().createElement(r.h,{headingLevel:"h2"},"Select roles"),l().createElement("p",null,"Select the roles you would like access to.")),U,ee,a&&l().createElement(Y,{id:"bottom"}))};K.propTypes={roles:b().any,setRoles:b().any};const Q=K},20886:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var n=a(11325),l=a.n(n),r=a(6923),s=a(8010),c=a(50654);const o=l().create();o.interceptors.request.use(r.kK),o.interceptors.response.use(r.bl),o.interceptors.response.use(null,r.vg),o.interceptors.response.use(null,(e=>{const t=s.A.getStore();throw e.response&&403===e.response.status&&t.dispatch({type:c.W,payload:403}),e})),o.interceptors.response.use(null,r.Xy),o.interceptors.response.use(null,r.u2);const i=o},80562:(e,t,a)=>{"use strict";a.d(t,{V:()=>g,f:()=>y});var n=a(93345),l=a.n(n),r=a(72583),s=a(1902),c=a(1448),o=a(11830),i=a(38953),m=a(89035),d=a(47931),u=a(5556),p=a.n(u),E=a(20886);function y(e,t,a){const n=[];return"pending"===e&&(n.push({title:"Edit",onClick:()=>a({type:"edit",requestId:t})}),n.push({title:"Cancel",onClick:()=>a({type:"cancel",requestId:t})})),{items:n,disable:0===n.length}}function g({requestId:e,status:t,hideActions:a}){const[n,u]=l().useState(t),[p,y]=l().useState(!1),[g,h]=l().useState(!1),v=(0,c.wA)();function f(t){h(!0),E.A.patch(`/api/rbac/v1/cross-account-requests/${e}/`,{status:t},{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((e=>{if(e.errors&&e.errors.length>0)throw Error(e.errors.map((e=>e.detail)).join("\n"));v((0,o.z8)({variant:"success",title:`Request ${t} successfully`})),u(t),y(!1),h(!1)})).catch((e=>{v((0,o.z8)({variant:"danger",title:`There was an error ${"approved"===t?"approving":"denying"} your request`,description:e.message})),h(!1)}))}const b=l().createElement(s.J,{...(0,i.l)(n)},(0,d.ZH)(n));return a?b:l().createElement(l().Fragment,null,p||"pending"===n?l().createElement(l().Fragment,null,l().createElement(r.$n,{className:"pf-v5-u-mr-md",isDisabled:g||"approved"===n,variant:"primary",onClick:()=>f("approved")},"Approve"),l().createElement(r.$n,{className:"pf-v5-u-mr-md",isDisabled:g||"denied"===n,variant:"danger",onClick:()=>f("denied")},"Deny")):b,["approved","denied"].includes(n)&&l().createElement(r.$n,{variant:"plain","aria-label":"Edit status",onClick:()=>y(!p)},l().createElement(m.Ay,null)))}g.propTypes={requestId:p().string,status:p().any,hideActions:p().any}},38953:(e,t,a)=>{"use strict";a.d(t,{l:()=>m});var n=a(93345),l=a.n(n),r=a(42600),s=a(87945),c=a(27253),o=a(94502),i=a(89817);function m(e){let t=null,a=null;return"pending"===e?(t="blue",a=l().createElement(o.Ay,null)):"approved"===e?(t="green",a=l().createElement(r.Ay,null)):"denied"===e?(t="red",a=l().createElement(s.Ay,null)):"cancelled"===e?(t="orange",a=l().createElement(c.Ay,null)):"expired"===e&&(t="grey",a=l().createElement(i.Ay,null)),{color:t,icon:a}}},25823:()=>{},16369:()=>{},62275:()=>{},89205:()=>{},20681:()=>{},95067:()=>{},43502:()=>{},75189:()=>{},89347:()=>{},61858:()=>{},1537:()=>{},86893:()=>{},41069:()=>{},43619:()=>{},74895:()=>{},7302:()=>{},63701:()=>{},89092:()=>{},71036:()=>{},86151:()=>{},51225:()=>{},26078:()=>{},50545:()=>{},98497:()=>{},5937:()=>{},5637:()=>{},5391:()=>{},86073:()=>{},87034:()=>{},14332:()=>{},56083:()=>{},18340:()=>{},22405:()=>{},70043:()=>{},28195:()=>{},81117:()=>{},21289:()=>{},36752:()=>{},85586:()=>{},83696:()=>{}}]);